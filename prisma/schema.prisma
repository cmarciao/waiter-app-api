generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

enum UserType {
    WAITER
    ADMIN

    @@map("user_type")
}

model User {
    id       String   @id @default(uuid()) @db.Uuid
    name     String
    email    String   @unique
    password String
    type     UserType

    @@map("users")
}

model Category {
    id    String @id @default(uuid()) @db.Uuid
    emoji String
    name  String @unique

    ProductToCategories ProductToCategories[]

    @@map("categories")
}

model Ingredient {
    id    String @id @default(uuid()) @db.Uuid
    emoji String
    name  String @unique

    products ProductToIngredients[]

    @@map("ingredients")
}

model Product {
    id          String @id @default(uuid()) @db.Uuid
    name        String @unique
    description String
    imageUrl    String

    categories  ProductToCategories[]
    ingredients ProductToIngredients[]

    @@map("products")
}

model ProductToCategories {
    productId  String @db.Uuid
    categoryId String @db.Uuid

    product  Product  @relation(fields: [productId], references: [id])
    category Category @relation(fields: [categoryId], references: [id])

    @@id([productId, categoryId])
    @@map("product_categories")
}

model ProductToIngredients {
    productId    String @db.Uuid
    ingredientId String @db.Uuid

    product    Product    @relation(fields: [productId], references: [id])
    ingredient Ingredient @relation(fields: [ingredientId], references: [id])

    @@id([productId, ingredientId])
    @@map("product_ingredients")
}
